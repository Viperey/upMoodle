angular.module("upmApp").controller("confirmEmailCtrl",["$scope","$cookies","api","snackbar","$routeParams","$location","$timeout",function($scope,$cookies,api,snackbar,$routeParams,$location){console.log("confirmEmailCtrl"),console.log($routeParams.token),$scope.confirmed=!1,api.confirmEmail($routeParams.token).success(function(data){snackbar.message(data.message,3e3),$location.path("/login")}).error(function(data){snackbar.error(data,3e3),$location.path("/login")})}]),angular.module("upmApp").controller("dashboardCtrl",["$scope","$cookies","api","User","userModel",function(){}]),angular.module("upmApp").controller("loginController",["$scope","$cookies","api","User","$location","snackbar",function($scope,$cookies,api,User,$location,snackbar){$scope.sendForm=function(user){var email=user&&user.email?user.email:null,password=user&&user.password?user.password:null;api.login(email,password).success(function(data){snackbar.message(data.message),$scope.getUser()}).error(function(data){snackbar.error(data.error)})},$scope.signIn=function(){$location.path("/signup")},$scope.recoverPassword=function(){$location.path("/recoverPassword")},$scope.getUser=function(){api.getUser().success(function(){$location.path("/dashboard")}).error(function(data){snackbar.error(data.error)})}}]),angular.module("upmApp").controller("profileCtrl",["$scope","$cookies","api","User","userModel","snackbar",function($scope,$cookies,api,User,userModel,snackbar){$scope.editMode=!1,$scope.user=User.model,$scope.profilePic=api.getPic($scope.user.profilePic),$scope.update=function(userModel){api.updateUser(userModel).success(function(data){snackbar.message(data),$scope.editMode=!1,delete $scope.user.password}).error(function(data){snackbar.error(data.error),delete $scope.user.password,User.destroy(),User.get().then(function(){$scope.user=User.get()})})}}]),angular.module("upmApp").controller("recoverPasswordCtrl",["$scope","$cookies","api","snackbar","$location",function($scope,$cookies,api,snackbar,$location){$scope.sendForm=function(email){api.recoverPassword(email).success(function(data){snackbar.message(data.message,3e3),$location.path("/login")}).error(function(data){snackbar.error(data,3e3)})}}]),angular.module("upmApp").controller("signUpCtrl",["$scope","$cookies","api","snackbar",function($scope,$cookies,api,snackbar){$scope.signedup=!1,$scope.signUp=function(user){api.signup(user.email,user.password,user.nick).success(function(){$scope.signedup=!0}).error(function(data){snackbar.error(data.error,5e3)})}}]),angular.module("upmApp").controller("subjectsCtrl",["$scope","$cookies","api","User","userModel",function($scope){$scope.sidebarShow="sidebarShow"}]);