angular.module("upmApp").factory("api",function($http){return base_url="http://127.0.0.1:8000/",{getUser:function(){return $http({method:"GET",url:base_url+"user/"})},login:function(userEmail,userPassword){return $http({method:"post",url:base_url+"login/",headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(obj){var str=[];for(var p in obj)str.push(encodeURIComponent(p)+"="+encodeURIComponent(obj[p]));return str.join("&")},data:{email:userEmail,password:userPassword}})},logout:function(){return $http({method:"POST",url:base_url+"logout/"})}}}),angular.module("upmApp").factory("User",["$location","api",function($location,api){return{model:void 0,update:function(userModelIn){this.model=userModelIn},destroy:function(){this.model=void 0},get:function(){return void 0==this.model||void 0===this.model?api.getUser().then(function(response){return response.data},function(){return $location.path("/login"),!1}):this.model},set:function(model){this.model=model}}}]);